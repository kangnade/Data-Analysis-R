t1 <- "1705"
t2 <- "11:15:10.12 PM"
parse_date(d1, "%B %d, %Y")
parse_date(d2, "%Y-%b-%d")
parse_date(d3, "%d-%b-%Y")
parse_date(d4, c("%B %d (%Y)", "%B %d (%Y)"))
parse_date(d4, "%B %d (%Y)")
parse_date(d5, "%b-%d-%y")
parse_date(d5, "%b/%d/%y")
parse_date(d5, "%m/%d/%y")
library(hms)
parse_time(t1)
parse_time(t1, "%H%M")
parse_time(t2, "%I:%M:%S.%OS %p")
challenge <- read_csv(readr_example("challenge.csv"))
problems(challenge)
challenge <- read_csv(readr_example("challenge.csv"), col_types = cols(x = col_integer(), y = col_character()))
challenge <- read_csv(readr_example("challenge.csv"), col_types = cols(x = col_double(), y = col_character()))
tail(challenge)
challenge <- read_csv(readr_example("challenge.csv"), col_types = cols(
x = col_double(), y = col_date()
))
tail(challenge)
challenge2 <- read_csv(readr_example("challenge.csv"),
guess_max = 1001)
challenge2
challenge2 <- read_csv(readr_example("challenge.csv"),
col_types = cols(.default = col_character()))
challenge2
df <- tribble(
~x, ~y,
"1", "1.21",
"2", "2.32",
"3", "4.56"
)
df
type_convert(df)
write_rds(challenge, "challenge.rds")
read_rds("challenge.rds")
library(feather)
install.packages("feather")
library(feather)
write_feather(challenge, "challenge.feather")
read_feather("challenge.feather")
library(tidyverse)
table4a
table4a %>%
gather('1999', '2000', key = "year", value = "cases")
table4a %>%
gather(`1999`, `2000`, key = "year", value = "cases")
table4b
table4b %>%
gather(`1999`,`2000`, key = "year", value = "population")
tidy4a <- table4a %>%
gather(`1999`, `2000`, key = "year", value = "cases")
tidy4b <- table4b %>%
gather(`1999`,`2000`, key = "year", value = "population")
left_join(tidy4a, tidy4b)
table2
spread(table2, key = type, value = count)
stocks <- tibble(
year   = c(2015, 2015, 2016, 2016),
half  = c(   1,    2,     1,    2),
return = c(1.88, 0.59, 0.92, 0.17)
)
stocks %>%
spread(year, return) %>%
gather("year", "return", `2015`:`2016`)
stocks
table4a %>%
gather(1999, 2000, key = "year", value = "cases")
people <- tribble(
~name,             ~key,    ~value,
#-----------------|--------|------
"Phillip Woods",   "age",       45,
"Phillip Woods",   "height",   186,
"Phillip Woods",   "age",       50,
"Jessica Cordero", "age",       37,
"Jessica Cordero", "height",   156
)
people
spread(people, key = key, value = value)
people <- tribble(
~name,             ~type,    ~count,
#-----------------|--------|------
"Phillip Woods",   "age",       45,
"Phillip Woods",   "height",   186,
"Phillip Woods",   "age",       50,
"Jessica Cordero", "age",       37,
"Jessica Cordero", "height",   156
)
people
spread(people, key = type, value = count)
people <- tribble(
~name,             ~key,    ~value, ~obs
#-----------------|--------|-------|-----
"Phillip Woods",   "age",       45,   1,
"Phillip Woods",   "height",   186,   1,
"Phillip Woods",   "age",       50,   2,
"Jessica Cordero", "age",       37,   1,
"Jessica Cordero", "height",   156,   1
)
people <- tribble(
~name,             ~key,    ~value, ~obs,
#-----------------|--------|------|------
"Phillip Woods",   "age",       45, 1,
"Phillip Woods",   "height",   186, 1,
"Phillip Woods",   "age",       50, 2,
"Jessica Cordero", "age",       37, 1,
"Jessica Cordero", "height",   156, 1
)
spread(people, key, value)
preg <- tribble(
~pregnant, ~male, ~female,
"yes",     NA,    10,
"no",      20,    12
)
gather(preg, sex, count, male, female)
tab;e3
table3
table3 %>%
separate(rate, into = c("cases", "population"))
table3 %>%
separate(rate, into = c("case", "population"), sep = "/")
table3 %>%
separate(rate, into = c("case", "population"),
convert = TRUE)
table3 %>%
separate(year, into = c("century", "year"), sep = 2)
table5
table5 %>%
unite(new, century, year)
table5 %>%
unite(new, century, year, sep = "")
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"))
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"))
?separate
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"), extra = "drop")
tibble(x = c("a,b,c", "d,e,f,g", "h,i,j")) %>%
separate(x, c("one", "two", "three"), extra = "merge")
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"))
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"), fill = "right")
tibble(x = c("a,b,c", "d,e", "f,g,i")) %>%
separate(x, c("one", "two", "three"), fill = "left")
stocks <- tibble(
year   = c(2015, 2015, 2015, 2015, 2016, 2016, 2016),
qtr    = c(   1,    2,    3,    4,    2,    3,    4),
return = c(1.88, 0.59, 0.35,   NA, 0.92, 0.17, 2.66)
)
stocks
stocks %>%
spread(year, return)
stocks %>%
spread(year, return) %>%
gather(year, return, `2015`:`2016`, na.rm = TRUE)
stocks %>%
complete(year, qtr)
treatment <- tribble(
~ person,           ~ treatment, ~response,
"Derrick Whitmore", 1,           7,
NA,                 2,           10,
NA,                 3,           9,
"Katherine Burke",  1,           4
)
treatment
treatment %>%
fill(person)
?spread
?fill
?spread
?complete
who
library(tidyverse)
who
who1 <- who %>%
gather(new_sp_m014:newrel_f65, key = "key",
value = "cases",
na.rm = TRUE)
who1
who1 %>%
count(key)
who2 <- who1 %>%
mutate(key = stringr::str_replace(key, "newrel", "new_rel"))
who2
who3 <- who2 %>%
separate(key, c("new", "type", "sexage"), sep = "_")
who3
who3 %>%
count(new)
who4 <- who3 %>%
select(-new, -iso2, -iso3)
who4
who5 <- who4 %>%
separate(sexage, c("sex", "age"), sep = 1)
who5
library(tidyverse)
library(nycflights13)
airlines
airports
planes
weather
planes %>%
count(tailnum) %>%
filter(n > 1)
weather %>%
count(year, month, day, hour, origin) %>%
filter(n > 1)
flights %>%
count(year, month, day, flights) %>%
filter(n > 1)
flights %>%
count(year, month, day, flight) %>%
filter(n > 1)
flights %>%
count(year, month, day, tailnum) %>%
filter(n > 1)
flights %>%
arrange(year, month, day, sched_dep_time, carrier, flight) %>%
mutate(flight_id = row_number()) %>%
glimpse()
flights
Lahman::Batting
Lahman::Batting %>%
count(playerID, yearID, stint) %>%
filter(n > 1)
babynames::babynames
babynames::babynames
library(babynames)
nasaweather::atmos
fueleconomy:vehicles
ggplot2::diamonds
ggplot2::diamonds %>%
distinct() %>%
nrow()
ggplot2::diamonds %>%
nrow()
flights2 <- flights %>%
select(year:day, hour, origin, dest, tailnum, carrier)
flights2
flights2 %>%
select(-origin, -dest)
flights2 %>%
select(-origin, -dest) %>%
left_join(airlines, by = "carrier")
flights2 %>%
select(-origin, -dest) %>%
mutate(name = airlines$name[match(carrier, airlines$carrier)])
airports %>%
semi_join(flights, c("faa" = "dest")) %>%
ggplot(mapping = aes(lon, lat)) +
borders("state") +
geom_point(color = n()) +
coord_quickmap()
library(purrr)
airports %>%
semi_join(flights, c("faa" = "dest")) %>%
ggplot(mapping = aes(lon, lat)) +
borders("state") +
geom_point(color = n()) +
coord_quickmap()
airports %>%
semi_join(flights, c("faa" = "dest")) %>%
ggplot(mapping = aes(lon, lat)) +
borders("state") +
geom_point() +
coord_quickmap()
avg_dest_delay <- flights %>%
group_by(dest) %>%
summarise(delay = mean(arr_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c(dest = "faa"))
avg_dest_delay %>%
ggplot(mapping = aes(lon, lat, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap()
airports
flights %>%
left_join(airports, by = c(dest = "faa")) %>%
left_join(airports, by = c(origin = "faa")) %>%
head()
View(flights)
flights_loc <- flights %>%
left_join(airports, by = c(dest = "faa")) %>%
left_join(airports, by = c(origin = "faa")) %>%
head()
View(flights_loc)
flights_loc <- flights %>%
left_join(airports, by = c(dest = "faa")) %>%
left_join(airports, by = c(origin = "faa")) %>%
head()
flights_loc
plane_age <- planes %>%
mutate(age = 2018 - year) %>%
select(tailnum, age)
flights %>%
inner_join(plane_age, by = "tailnum") %>%
group_by(age) %>%
summarise(delay = mean(dep_delay)) %>%
ggplot(mapping = aes(x = age, y = delay)) +
geom_point() +
geom_line()
flights %>%
inner_join(plane_age, by = "tailnum") %>%
group_by(age) %>%
filter(!is.na(dep_delay)) %>%
summarise(delay = mean(dep_delay)) %>%
ggplot(mapping = aes(x = age, y = delay)) +
geom_point() +
geom_line()
weather
flight_weather <- flights %>%
inner_join(weather, by = c("origin" = "origin", "year" = "year",
"month" = "month", "day" = "day",
"hour" = "hour"))
flight_weather
flight_weather %>%
group_by(precip) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
ggplot(mapping = aes(x = precip, y = delay)) +
geom_line() + geom_point()
library(viridis)
install.packages("viridisLite")
install.packages("viridisLite")
install.packages("viridis")
install.packages("viridis")
library(viridis)
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_viridis()
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_gradient()
install.packages("viridis")
install.packages("viridis")
library(viridis)
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_gradient()
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_viridis()
install.packages("viridis")
install.packages("viridis")
library(viridis)
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_viridis()
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_viridis()
library(tidyverse)
library(nycflights13)
library(viridis)
flights %>%
filter(year == 2013, month == 6, day == 13) %>%
group_by(dest) %>%
summarise(delay = mean(dep_delay, na.rm = TRUE)) %>%
inner_join(airports, by = c("dest" = "faa")) %>%
ggplot(aes(y = lat, x = lon, size = delay, colour = delay)) +
borders("state") +
geom_point() +
coord_quickmap() +
scale_color_viridis()
flights %>%
anti_join(planes, by = "tailnum") %>%
count(carrier, sort =TRUE)
planes_al100 <- filter(flights) %>%
group_by(tailnum) %>%
count() %>%
filter(n > 100)
planes_al100
flights %>%
semi_join(planes_al100, by = "tailnum")
flights %>%
group_by(year, month, day) %>%
summarise(all_24 = sum(dep_delay, na.rm = TRUE) + sum(arr_delay, na.rm = TRUE)) %>%
mutate(all_48 = all_24 + lag(all_24)) %>%
arrange(desc(all_48))
all_24
flights$all_24
v <- c(1,2,3,4,5,6,7)
lag(v)
airplane_multi_carrier <- flights %>%
group_by(tailnum, carrier) %>%
count() %>%
filter(n() > 1) %>%
select(tailnum) %>%
distinct()
airplane_multi_carrier
library(tidyverse)
library(stringr)
str_length("Texas Christian University")
str_length("TexasChristianUniversity")
str_c("Texas", "Christian", "University")
str_c("Texas", " Christian", " University")
str_c("Texas", " ", "Christian", " ", "University")
str_c("Texas A&M University", "College Station", sep = ",")
str_c("Texas A&M University", " College Station", sep = ",")
univ <- c("TCU", "TAMU", "SMU", NA)
str_replace_na(univ)
str_c("TCU", str_c(" SMU", " TAMU"), " BAYLOR")
str_c(c("TCU", "SMU", "BAYLOR"))
str_c(c("TCU", "SMU", "BAYLOR"), collapse = ",")
univ <- c("TCU", "TAMU", "SMU", "UT")
str_sub(univ, 1, 3)
str_sub(univ, 1, 4)
str_sub(univ, 1, 1) <- str_to_lower(str_sub(univ, 1, 1))
univ
str_sort(univ, locale = "en")
univ <- c("TCU", "TAMU", "SMU", "UT")
str_sort(univ, locale = "en")
str_sort(univ, locale = "haw")
paste(univ)
paste0(univ)
paste("a", "b", "c")
paste("a", "b", "c")
paste0("a", "b", "c")
str_c("a", "b", "c")
str_c("TCU", NA)
paste("TCU", NA)
paste0("TCU", NA)
str_c(c("TCU", "SMU", "BAYLOR"), collapse = ",") # collapsed together
x <- c("a", "abc", "abcd", "abcde", "abcdef")
L <- str_length(x)
m <- ceiling(L / 2)
str_sub(x, m, m)
#> [1] "a" "b" "b" "c" "c"
x <- c("a", "abc", "abcd", "abcde", "abcdef")
L <- str_length(x)
m <- ceiling(L / 2)
str_sub(x, m, m)
x <- c("T", "TCU", "TCCU", "TCCCU", "TCCCCU")
L <- str_length(x)
m <- ceiling(L / 2)
str_sub(x, m, m)
?str_wrap
?str_trim
str_trim(string, side = c("both", "left", "right"))
str_trim("  String with trailing and leading white space\t")
str_pad("TCU", 5, side side = "both")
str_pad("TCU", 5, side = "both")
str_pad("TCU", 5, side = "right")
str_pad("TCU", 5, side = "left")
str_commasep <- function(x, sep = ", ", last = ", and ") {
if (length(x) > 1) {
str_c(str_c(x[-length(x)], collapse = sep),
x[length(x)],
sep = last)
} else {
x
}
}
str_commasep("a", "b", "c")
str_commasep(c("a", "b", "c"))
str_view(univ, "U")
str_view(univ, ".U.")
dot <- "\\."
writeLines(dot)
str_view(c("abv", "a.c", "bef"), "a\\.c")
str_view("\"'\\", "\"'\\\\")
str_view(c(".a.b.c", ".a.b", "....."), c("\\..\\..\\.."))
str_view(c("$^$", "ab$^$sfas"), "^\\$\\^\\$$")
x <- c("apple", "apple juice", "apple pie")
str_view(x, "apple")
str_view(x, "^apple$")
