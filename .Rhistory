stdErr_robust <- sqrt(diag(vcov_robust))
stdErr_robust
cor(residuals(model3), model3$model3$2)
cor(residuals(model3), model3$model3)
model3$coefficients
cor(model3$residuals, model3$coefficients)
cor(model3$residuals, method= c(model3$coefficients))
betas <- c(0.255445836, -0.004448147, 0.554631877, -2.115792505, -0.157832884)
cor(model3$residuals, betas)
cor(help)
help(cor)
residual <- model3$residuals
residualVector <- c(residual, residual, residual, residual, residual)
cor(residualVector, betas)
residual
cor(model3$residuals, model3$coefficients)
View(wage1)
residualM3 <- model3$residuals
residualM3
wage1$exper
cor(residualM3, wage1$exper)
bptest(model3)
library(GGally)
ggpairs(model3)
uhat <- model3$residuals
cor(dt[uhat, c("exper", "educ", "female", "nonwhite")])
cor(uhat, dt[c("exper", "educ", "female", "nonwhite")])
cor(dt[c("exper", "educ", "female", "nonwhite")], uhat)
cor(uhat, wage1[c("exper", "educ", "female", "nonwhite")])
# Question 2.3
model3 <- lm(wage ~ exper + expersq + educ + female + nonwhite, data = wage1)
summary(model3)
uhat <- model3$residuals
cor(uhat, wage1[c("exper", "educ", "female", "nonwhite")])
# Question 2.3
model3 <- lm(wage ~ exper + expersq + educ + female + nonwhite, data = wage1)
summary(model3)
uhat <- model3$residuals
cor(uhat, wage1[c("exper", "expersq", "educ", "female", "nonwhite")])
cor(model3$fitted.values, wage1$wage)
result <- cor(model3$fitted.values, wage1$wage)
result^2
wage1$wage2-hat <- exp(model1$fitted.values)*B2
B1 <- exp(0.4138^2/2) # the residual std. error
B1
B2 <- mean(exp(model2$residuals)) # Duan's (1983) approach
B2
wage1$wage2-hat <- exp(model1$fitted.values)*B2
wage1$wage2hat <- exp(model1$fitted.values)*B2
wage1$wage2hat <- exp(model1$fitted.values)*1.009537
cor(wage1$wage, wage1$wage2hat)
wage1$wage2hat <- exp(model1$fitted.values) * 1.009537
wage2hat <- exp(model1$fitted.values) * 1.009537
cor(wage1$wage, wage2hat)
wage2hat
library(utils)
utils::adist()
utils::adist(sitting, kitten)
x <- c(s,i,t,t,i,n,g)
x <- c("s,i,t,t,i,n,g")
x
y <- c("k,i,t,t,e,n")
utils::adist(x, ky)
utils::adist(x, y)
x <- "sitting"
x
y <- "kitten"
utils::adist(x, y)
help(utils::adist)
help(utils)
"utils"
help(adist)
utils::adist(x, y, costs = (1,1,2))
utils::adist(x, y, costs = c(1,1,2))
utils::adist(x, y, costs = list(i=1,d=1,s=2))
install.packages("TraMineR")
library(TraMineR)
library(gganimate)
library(httr)
set_config(config(ssl_verifypeer = 0L))
library(devtools)
library(RCurl)
library(httr)
set_config( config( ssl_verifypeer = 0L ) )
devtools::install_github("RcppCore/Rcpp")
devtools::install_github("dgrtwo/gganimate")
shareimprove this answer
library(bitops)
library(devtools)
library(gganimate)
library(devtools)
library(devtools)
library(RCurl)
library(httr)
install.packages("bitops")
install.packages("bitops")
library(devtools)
library(RCurl)
library(bitops)
library(RCurl)
library(httr)
library(gganimate)
gganimate::gganimate(p)
library(TraMineR)
seqdef(rbind("s-i-t-t-i-n-g","k-i-t-t-e-n"))
d1 <- seqdef(rbind("s-i-t-t-i-n-g","k-i-t-t-e-n"))
seqdist(d1, method = "OM", indel = 1, sm = "CONSTANT")
seqplot(d1)
dur <- read.csv("http://nb.vse.cz/~zouharj/econ/durgoods.csv")
head(dur)
plot(dur$dish)
plot(dur$dish, type = "b")
plot(dur$frig, type = "b")
dur$year <- seq(from=1978, to=1987.75, by=0.25)
dur$year <- seq(from=1978, to=1985.75, by=0.25)
plot(dur$frig ~ dur$year, type = "b")
dur$quarter <- 1:4
model1 <- lm(dish ~ quarter, data = dur)
summary(model1)
plot(dur$dish, type = "b")
line(model1$fitted.values)
plot(dur$dish, type = "b")
lines(model1$fitted.values)
dur$quarter <- factor(1:4)
model1 <- lm(dish ~ quarter, data = dur)
summary(model1)
plot(dur$dish, type = "b")
lines(model1$fitted.values)
model2 <- lm(frig ~ quarter, data = dur)
summary(model2)
model2 <- lm(frig ~ quarter, data = dur)
summary(model2)
plot(dur$frig, type = "'b")
lines(model2$fitted.values)
model2 <- lm(frig ~ quarter, data = dur)
summary(model2)
plot(dur$frig, type = "'b")
lines(model2$fitted.values)
plot(dur$frig, type = "'b")
lines(model2$fitted.values)
model2 <- lm(frig ~ quarter, data = dur)
summary(model2)
plot(dur$frig, type = "b")
lines(model2$fitted.values)
model3 <- lm(frig ~ quarter + year + I(year^2), data = dur)
summary(model3)
model3 <- lm(frig ~ quarter + year + I(year^2), data = dur) # if not creating new variable, use I() function to square
summary(model3)
plot(dur$frig, type = "b")
lines(model3$fitted.values)
plot(dur$frig, type = "b", xlab = "Quarter", ylab = "Sales of Fridges", main = "Seasonality of Fridges Sales")
plot(dur$frig, type = "b", xlab = "Quarter", ylab = "Sales of Fridges", main = "Seasonality of Fridges Sales")
lines(model3$fitted.values)
dur$frig_adjusted <- model3$residuals
plot(dur$frig_adjusted, type = "b")
dur$frig_adjusted <- model3$residuals + mean(dur$frig)
plot(dur$frig_adjusted, type = "b")
lines(dur$frig)
anova(model3, lm(frig ~ year + I(year^2), data = dur))
model4 <-- lm(log(frig) ~ quarter, data = dur)
summary(model4)
model4 <- lm(log(frig) ~ quarter, data = dur)
summary(model4)
exp(model4$coefficients) # To exponentiate and get the factors of multiplication
dt <- read.csv("http://nb.vse.cz/~zouharj/econ/fertil3.csv")
desc <- read.csv("http://nb.vse.cz/~zouharj/econ/fertil3_desc.csv")
View(desc)
head(dt)
head(dt, n=10)
head(dt[,c("pe","pe_1","")], n=10)
head(dt[,c("pe","pe_1","pe_2","pe_3")], n=10)
tail(dt[,c("pe","pe_1","pe_2","pe_3")], n=10)
head(dt[,c("year","pe","pe_1","pe_2","pe_3")], n=10)
tail(dt[,c("year","pe","pe_1","pe_2","pe_3")], n=10)
plot(dt$ww2, type = "b")
plot(dt$ww2 ~ dt$year, type = "b")
plot(dt$ww2 ~ dt$year, type = "b", xlab="Year", ylab="WW2")
model5 <- lm(gfr ~ year, data = dt)
summary(model5)
plot(gfr ~ year, data = dt, type = "b")
lines(model5$fitted.values)
plot(gfr ~ year, data = dt, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 5 Fertility on Years")
plot(dt$gfr, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 5 Fertility on Years")
lines(model5$fitted.values)
model6 <- lm(gfr ~ year + ww2 + pill, data=dt)
summary(model6)
model6 <- lm(gfr ~ year + ww2 + pill, data=dt)
summary(model6)
plot(dt$gfr, type = "b")
lines(model6$fitted.values)
plot(dt$gfr, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 5 Fertility on Years")
lines(model6$fitted.values)
plot(dt$gfr, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 6 Fertility on Years")
lines(model6$fitted.values)
model7 <- lm(gfr ~ year + ww2 + pill + pe + pe_1 + pe_2, data=dt)
summary(model7)
plot(dt$gfr, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 7 Fertility on Years")
lines(model7$fitted.values)
anova(model6, model7) # F-test for pe, pe_1, and pe_2
model6_fix <- lm(gfr ~ year + ww2 + pill, data=dt[-c(1,2),])
summary(model6_fix)
plot(dt$gfr, type = "b", xlab = "Year", ylab = "General Fertility Rate", main = "Model 6_fix Fertility on Years")
lines(model6_fix$fitted.values)
anova(model6_fix, model7)
library(car)
library(car)
linearHypothesis(model7, c("pe","pe_1"."pe_2"))
linearHypothesis(model7, c("pe","pe_1","pe_2"))
okun2 <- read.csv("okun2.csv", sep = ";")
library(readr)
automobile_market <- read_csv("C:/Users/nade/Desktop/Intro Econometrics/Excel Data/automobile_market.csv")
View(automobile_market)
library(readr)
labour_market <- read_csv("C:/Users/nade/Desktop/Intro Econometrics/Excel Data/labour_market.csv")
View(labour_market)
at <- automobile_market
1990-1975
15*12
180+10
1/12
0.08333333*10
at$year <- seq(from=1975, to=1991.83333, by=0.083333)
at$year <- seq(from=1975.083333, to=1991.83333, by=0.083333)
head(at)
View(at)
at$month <- 1:12
at$month <- 1:12[-2]
View(at)
at$month <- seq(1:12,length.out = 202)
at$month <- 1:12
View(at)
help("seq")
help("repeated number")
help("month dummy")
help("repeat number")
help("seq_len")
at$month <- 1:12
automobile_market$month <- 1:12
at$month <- 1:12
dur <- read.csv("http://nb.vse.cz/~zouharj/econ/durgoods.csv")
dur$year <- seq(from=1978, to=1985.75, by=0.25)
at$month <- 1:12
help("seq_along")
at$month <- 1:12
at$month1 <- 1:12
help("rep")
at$month <- rep(1:12,202)
at$month <- rep(1:12)
at$month <- rep(1:12, length.out=202)
head(at)
View(at)
View(at)
model1 <- lm(log(carexp)~year + month, data = at)
summary(model1)
help(bgtest)
check1 <- lm(log(carexp)~year, data=at)
summary(check1)
model1 <- lm(log(carexp)~year + month, data = at)
summary(model1)
model2 <- lm(log(carexp)~month, data=at)
summary(model2)
anova(model1,model2)
model1 <- lm(log(carexp)~year + month, data = at)
summary(model1)
plot(at$carexp~at$year, type="b")
model3 <- lm(log(carexp)~year, data=at)
summary(model3)
anova(model1, model3)
library(car)
linearHypothesis(model1, "year")
linearHypothesis(model1, "month")
lag <- function(series){
n <- length(series)
lagged_series <- c(NA, series[-n])
return(lagged_series)
}
n <- nrow(at)
at$unemp_lag1 <- c(NA, at$unemp[-n])
at$unemp_lag2 <- c(NA, at$at$unemp_lag1[-n])
lag <- function(series){
n <- length(series)
lagged_series <- c(NA, series[-n])
return(lagged_series)
}
n <- nrow(at)
at$unemp_lag1 <- c(NA, at$unemp[-n])
at$unemp_lag2 <- c(NA, at$at$unemp_lag1[-n])
View(at)
lag <- function(series){
n <- length(series)
lagged_series <- c(NA, series[-n])
return(lagged_series)
}
n <- nrow(at)
at$unemp_lag1 <- c(NA, at$unemp[-n])
at$unemp_lag2 <- c(NA, at$unemp_lag1[-n])
View(at)
lm(log(carexp)~unemp + unemp_lag1 + unemp_lag2 + year, data=at)
q1d <- lm(log(carexp)~unemp + unemp_lag1 + unemp_lag2 + year, data=at)
summary(q1d)
options(scipen = 5)
q1d <- lm(log(carexp)~unemp + unemp_lag1 + unemp_lag2 + year, data=at)
summary(q1d)
exp(q1d$coefficients)
exp(q1d$coefficients)-1
at$carexp_adjusted <- model1$residuals
q1e <- lm(log(carexp_adjusted)~unemp + unemp_lag1 + unemp_lag2 + year, data=at)
summary(q1e)
q1f<-lm(unemp~unemp_lag1,data=at)
summary(q1f)
library(orcutt)
model_CO <- cochrane.orcutt(q1e)
summary(model_CO)
confint(model_CO$coefficients)
confint(model_CO)
help("orcutt")
help("cochrane.orcutt")
help("confint")
confint(model_CO,vcov(model_CO))
confint(model_CO)
confint(model_CO)["(unemp)",]
confint(model_CO)
model_CO <- cochrane.orcutt(q1e)
summary(model_CO)
exp(model_CO$coefficients)-1
0.139232-1.96*0.248314
0.139232+1.96*0.248314
q1e <- lm(log(carexp_adjusted)~unemp + unemp_lag1 + unemp_lag2 + year, data=at)
summary(q1e)
model_CO <- cochrane.orcutt(q1e)
summary(model_CO)
lm(log(carexp)~year,data=at)
q1j <- lm(log(carexp)~year,data=at)
summary(q1j)
at$lced <- q1j$residuals
View(at)
at$lced_lag1 <- c(NA, at$lced[-n])
head(at)
lm(lced~lced_lag1,data=at)
q1k <- lm(lced~lced_lag1,data=at)
summary(q1k)
confint(q1k)
lmar <- labour_market
modelQ3 <- lm(wage ~ ., data=lmar)
summary(modelQ3)
library(lmtest)
library(sandwich)
bptest(modelQ3)
vcov_robust <- vcovHC(modelQ3)
vcov_robust
stdErr_robust <- sqrt(diag(vcov_robust))
stdErr_robust
#Calculate the conventional standard error
#Just delete the HC in the vcovHC, so to get the conventional standarrd errors
vcov_conventional <- vcov(modelQ3)
stdErr_conventional <- sqrt(diag(vcov_conventional))
rbind(stdErr_conventional, stdErr_robust)
# Ways to display results with std errors
coeftest(modelQ3, vcov = vcov_robust)
# To see the confidence invertals
# 95% CI based on robust std. errors
confint(modelQ3, vcov = vcov_robust)
library(stargazer)
stargazer(
modelQ3, modelQ3, se = list(NULL, stdErr_robust), type = "text"
)
modelQ3 <- lm(wage ~ ., data=lmar)
summary(modelQ3)
help("one-tail")
help("hypothesis")
help(normal distribution)
0.02554*2
lmar$femaleXmarried <- lmar$female*lmar$married
model3b <- lm(wage~.,data=lmar)
summary(model3b)
bgtest(model3b)
confint(model3b)
linearHypothesis(model1, "femaleXmarried=0")
c(18,0,1,0,0,1,0,0)*model3b$coefficients
c(1,18,0,1,0,0,1,0,0)*model3b$coefficients
sum(1,18,0,1,0,0,1,0,0)*coef(model3b))
sum(18,0,1,0,0,1,0,0)*coef(model3b))
sum(c(18,0,1,0,0,1,0,0)*coef(model3b))
sum(c(1,18,0,1,0,0,1,0,0)*coef(model3b))
sum(c(1,18,0,1,0,0,1,0,0)*coef(model3b))
-20.7526029+18*1.7411167+1.8864791+1.9940948
-20.7526029+18*1.7411167+1.8864791+1.9940948
sum(-20.7526029+18*1.7411167+1.8864791+1.9940948)
library(dplyr)
library(ggplot2)
```{r, echo=FALSE}
```{r, echo=FALSE}
library(purrr)
# install.packages("tidyverse")
setwd("C:/Users/nade/Desktop/Data Analysis R")
### LOAD PACKAGE ###
library(tidyverse)
# Chapter 1 Data Visualization with ggplot2
# ###First Steps###
# I made some adjustments to the original code in the book "R for Data Science"
# written by Dr. Hadley Wickham
# This is the first plot in the book
# Use theme(plot.title = element_text(hjust = 0.5)) to center the title
# Use expression(atop("","")) to separate the long title
first <- ggplot(data = mpg) +
geom_point(mapping = aes(x = displ, y = hwy)) +
ggtitle(expression(atop("Relationship between engine size","and fuel efficiency"))) +
xlab("Engine Size") +
ylab("Fuel Efficiency") +
theme_classic() +
theme(title = element_text(size = 18), text = element_text(size = 14),
plot.title = element_text(hjust = 0.5))
first
png("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_first_displ_hwy_plot.png")
first
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_first_displ_hwy_plot.pdf")
first
dev.off()
# A Graphing Template
# Exercises:
# 1. Run ggplot(data = mpg). What do you see?
testq1 <- ggplot(data = mpg)
testq1
# Answer: we see noting except grey background
# 2. How many rows are in mtcars? How many columns?
dim(mtcars)
# Answer: Using dim() function we get 32 rows and 11 columns in mtcars
# 3. What does the drv variable describe? Read the help for ?mpg to find out.
?mpg
# Answer:f = front-wheel drive, r = rear wheel drive, 4 = 4wd
# 4. Make a scatter plot of hwy(high way miles per gallon) versus cyl(city miles per gallon)
View(mpg)
hwy_cyl_Q4 <- ggplot(data = mpg, mapping = aes(x = cyl, y = hwy)) +
geom_point(mapping = aes(color = year)) +
ggtitle(expression(atop("Highway miles per gallon against","City miles per gallon Plot"))) +
xlab("City Miles Per Gallon") +
ylab("Highway Miles Per Gallon") +
theme(title = element_text(size = 16), text = element_text(size = 14),
legend.position = "top", plot.title = element_text(hjust = 0.5))
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_exercise_hwy_cyl_plot.pdf")
hwy_cyl_Q4
dev.off()
png("r_wickham/figures/chapter1/r_for_data_science_wickham_exercise_hwy_cyl_plot.png")
hwy_cyl_Q4
dev.off()
hwy_cyl_Q4
# 5. What happens if you make a scatterplot of class versus drv? Why is the plot not useful
class_drv_Q5 <- ggplot(data = mpg, mapping = aes(x = class, y = drv)) +
geom_point()
class_drv_Q5
# It doesn't help because these two are both categorical data
# ###Aesthetic Mappings###
# Book's plot of displ(engine displacement in litres) against hwy(highway m/p gallon)
hwy_displ_plot <- ggplot(data = mpg) +
geom_point(mapping = aes(x = displ, y = hwy, color = class)) +
ggtitle(expression(atop("Engine Displacement", "and Highway Miles Per Gallon"))) +
xlab("Engine Displacement in Litres") +
ylab("Highway Miles Per Gallon") +
theme_gray() +
theme(title = element_text(size = 16), text = element_text(size = 10),
legend.position = "top", plot.title = element_text(hjust = 0.5))
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_plot.pdf")
hwy_displ_plot
png("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_plot.png")
hwy_displ_plot
dev.off()
displ_hwy_map_size <- ggplot(data = mpg, aes(color = class)) +
geom_point(mapping = aes(x = displ, y = hwy, size = class)) +
ggtitle(expression(atop("Engine Displacement and", "Highway Miles Per Gallon"))) +
xlab("Engine displacement in litres") +
ylab("Highway miles per gallon") +
theme_classic() +
theme(plot.title = element_text(hjust = 0.5), title = element_text(size = 18),
text = element_text(size = 14))
displ_hwy_map_size
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_size_plot.pdf")
displ_hwy_map_size
png("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_size_plot.png")
displ_hwy_map_size
dev.off()
displ_hwy_map_alpha <- ggplot(data = mpg, aes(color = class)) +
geom_point(mapping = aes(x = displ, y = hwy, alpha = class)) +
ggtitle(expression(atop("Engine Displacement and", "Highway Miles Per Gallon"))) +
xlab("Engine displacement in litres") +
ylab("Highway miles per gallon") +
theme_classic() +
theme(plot.title = element_text(hjust = 0.5), title = element_text(size = 18),
text = element_text(size = 14))
displ_hwy_map_alpha
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_alpha_plot.pdf")
displ_hwy_map_alpha
png("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_alpha_plot.png")
displ_hwy_map_alpha
dev.off()
displ_hwy_map_shape <- ggplot(data = mpg, aes(color = class)) +
geom_point(mapping = aes(x = displ, y = hwy, shape = class)) +
ggtitle(expression(atop("Engine Displacement and", "Highway Miles Per Gallon"))) +
xlab("Engine displacement in litres") +
ylab("Highway miles per gallon") +
theme_classic() +
theme(plot.title = element_text(hjust = 0.5), title = element_text(size = 18),
text = element_text(size = 14))
displ_hwy_map_shape
pdf("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_shape_plot.pdf")
displ_hwy_map_shape
png("r_wickham/figures/chapter1/r_for_data_science_wickham_textbook_displ_hwy_color_shape_plot.png")
displ_hwy_map_shape
dev.off()
ggplot(data = mpg) +
geom_point(mapping = aes(x = displ, y = hwy, color = "blue"))
ggplot(data = mpg) +
geom_point(mapping = aes(x = displ, y = hwy), color = "blue")
